<div class="container card form-container">
	<div class="row">

		<div class="col-md-6">
			<h1>New Proposal</h1>
			<div>
				<form (ngSubmit)="createProposal(proposal)" #proposalForm="ngForm">
					<div class="form-group">
						<label for="customer">Customer Name</label>
						<input type="text" class="form-control" id="customer" placeholder="ABC Company" required name="customer"
							#customer='ngModel' [(ngModel)]="proposal.customer">
						<!--validación(pristine es del propio angular)-->
						<div [hidden]="customer.valid || customer.pristine" class="alert alert-danger">
							El cliente es requerido
						</div>
					</div>

					<div class="form-group">
						<label for="portfolio_url">Portfolio URL</label>
						<input type="text" class="form-control" id="portfolio_url" required name="portfolio_url" #portfolio_url='ngModel' [(ngModel)]="proposal.portfolio_url">
						<!--validación(pristine es del propio angular)-->
						<div [hidden]="portfolio_url.valid || portfolio_url.pristine" class="alert alert-danger">
							El protafolio es requerido
						</div>
					</div>

					<div class="form-group">
						<label for="tools">Tools</label>
						<input type="text" class="form-control" id="tools" placeholder="Tools" required name="tools" #tools='ngModel' [(ngModel)]="proposal.tools">
						<!--validación(pristine es del propio angular)-->
						<div [hidden]="tools.valid || tools.pristine" class="alert alert-danger">
							Las herramientas son requeridas
						</div>
					</div>

					<div class="form-group">
						<label for="estimated_hours">Estimated hours</label>
						<input type="number" class="form-control" id="estimated_hours" placeholder="number" required name="estimated_hours" #estimated_hours='ngModel' [(ngModel)]="proposal.estimated_hours">
						<!--validación(pristine es del propio angular)-->
						<div [hidden]="estimated_hours.valid || estimated_hours.pristine" class="alert alert-danger">
							Las horas estimadas son requeridas
						</div>
					</div>

					<div class="form-group">
						<label for="hourly_rate">Hourly rate</label>
						<div class="input-group mb-2 mr-sm-2 mb-sm-">
							<div class="input-group-addon">$</div>
							<input type="number" class="form-control" id="hourly_rate" placeholder="Hourly rate" required name="hourly_rate" #hourly_rate='ngModel' [(ngModel)]="proposal.hourly_rate">
							<!--validación(pristine es del propio angular)-->
							<div [hidden]="hourly_rate.valid || hourly_rate.pristine" class="alert alert-danger">
								La tarifa por horas es requerida
							</div>
						</div>
					</div>

					<div class="form-group">
						<label for="weeks_to_complete">Weeks to complete</label>
						<input type="number" class="form-control" id="weeks_to_complete" placeholder="number of weeks" required name="weeks_to_complete" #weeks_to_complete='ngModel' [(ngModel)]="proposal.weeks_to_complete">
						<!--validación(pristine es del propio angular)-->
						<div [hidden]="weeks_to_complete.valid || weeks_to_complete.pristine" class="alert alert-danger">
							El numero de semanas es necesario
						</div>
					</div>

					<div class="form-group">
						<label for="client_email">Client Email</label>
						<input type="email" class="form-control" id="client_email" placeholder="Email" required name="client_email" #client_email='ngModel' [(ngModel)]="proposal.client_email">
						<!--validación(pristine es del propio angular)-->
						<div [hidden]="client_email.valid || client_email.pristine" class="alert alert-danger">
							El correo es requerido
						</div>
					</div>

					<!--boton para crear proposal
					[disabled] es para que el boton solo pueda apretarse si se cumplen todas las validaciones -->
					<button type="submit" 
					class="btn btn-outline-info btn-lg"
					[disabled]="!proposalForm.form.valid"
					[hidden]="submitted">Crear Proposal</button>

					<!--notificacion que se agrego proposal -->
					<div class="alert alert-success" role="alert" [hidden]="!submitted">
						Creaste ha sido generado <a class="alert-link" routerLink="/proposals">Mira todos los proposals</a>
					</div>

				</form>
			</div>
		</div>
		
		<div class="col-md-6">
			<div>
				<p>Hi {{ proposal.customer }},</p>


				<p>It was a pleasure getting to meet with you and review your project requirements, I believe it is a great fit for the types of applications that I build out. Please feel free to check out some of my past projects <a href="{{ proposal.portfolio_url }}">here</a>.</p>


				<p>To successfully build out the application I will be utilizing {{ proposal.tools }}, and a number of other tools to ensure that the project follows industry wide best practices.</p>


				<p>Ensuring that you are fully informed is one of my top priorities, so in addition to incorporating everything that we discussed, I will also be creating a project management dashboard and sending you a project update message daily so that you can have a transparent view of the development as it takes place.</p>


				<p>To accomplish the project and meet the requirements that we discussed, I am estimating that it will take {{ proposal.estimated_hours }} hours in development time to complete. The project should take {{ proposal.weeks_to_complete }} weeks to complete and with my hourly rate of {{ proposal.hourly_rate }}/hour, the estimated total will be {{ proposal.hourly_rate*proposal.estimated_hours | currency }}.</p>


				<p>The next step from here is to set up a meeting to finalize the project and sign contracts.</p>


				<p>I am excited to working with you and build out this project.</p>
				<p>You can write me at my email: {{proposal.client_email}}</p>
			</div>
		</div>

	</div>
</div>